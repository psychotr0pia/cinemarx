-- MySQL dump 10.13  Distrib 8.0.30, for Linux (x86_64)
--
-- Host: localhost    Database: cinemarx
-- ------------------------------------------------------
-- Server version	8.0.30-0ubuntu0.22.04.1

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `ADMIN`
--

DROP TABLE IF EXISTS `ADMIN`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `ADMIN` (
  `RUT` int NOT NULL,
  `PASSWORD` varchar(100) NOT NULL,
  PRIMARY KEY (`RUT`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ADMIN`
--

LOCK TABLES `ADMIN` WRITE;
/*!40000 ALTER TABLE `ADMIN` DISABLE KEYS */;
/*!40000 ALTER TABLE `ADMIN` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `ASIENTO`
--

DROP TABLE IF EXISTS `ASIENTO`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `ASIENTO` (
  `CODIGO_DE_ASIENTO` int NOT NULL AUTO_INCREMENT,
  `CODIGO_SALA` int NOT NULL,
  `DISPONIBILIDAD` varchar(100) NOT NULL,
  `FILA` int NOT NULL,
  `COLUMNA` int NOT NULL,
  PRIMARY KEY (`CODIGO_DE_ASIENTO`),
  KEY `CODIGO_SALA` (`CODIGO_SALA`),
  CONSTRAINT `ASIENTO_ibfk_1` FOREIGN KEY (`CODIGO_SALA`) REFERENCES `SALAS` (`CODIGO_SALA`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ASIENTO`
--

LOCK TABLES `ASIENTO` WRITE;
/*!40000 ALTER TABLE `ASIENTO` DISABLE KEYS */;
/*!40000 ALTER TABLE `ASIENTO` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `CLIENTE`
--

DROP TABLE IF EXISTS `CLIENTE`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `CLIENTE` (
  `RUT` int NOT NULL,
  `ID_TICKETS` int NOT NULL,
  `NOMBRE` varchar(100) NOT NULL,
  `APELLIDO` varchar(100) NOT NULL,
  `FECHA_NACIMIENTO` date NOT NULL,
  PRIMARY KEY (`RUT`),
  KEY `ID_TICKETS` (`ID_TICKETS`),
  CONSTRAINT `CLIENTE_ibfk_1` FOREIGN KEY (`ID_TICKETS`) REFERENCES `TICKETS` (`ID_TICKETS`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `CLIENTE`
--

LOCK TABLES `CLIENTE` WRITE;
/*!40000 ALTER TABLE `CLIENTE` DISABLE KEYS */;
/*!40000 ALTER TABLE `CLIENTE` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `FUNCIONES`
--

DROP TABLE IF EXISTS `FUNCIONES`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `FUNCIONES` (
  `ID_FUNCIONES` int NOT NULL AUTO_INCREMENT,
  `RUT` int NOT NULL,
  `ID_PELICULA` int NOT NULL,
  `CODIGO_SALA` int NOT NULL,
  `HORARIO` datetime NOT NULL,
  PRIMARY KEY (`ID_FUNCIONES`),
  KEY `RUT` (`RUT`),
  KEY `ID_PELICULA` (`ID_PELICULA`),
  KEY `CODIGO_SALA` (`CODIGO_SALA`),
  CONSTRAINT `FUNCIONES_ibfk_1` FOREIGN KEY (`RUT`) REFERENCES `ADMIN` (`RUT`),
  CONSTRAINT `FUNCIONES_ibfk_2` FOREIGN KEY (`ID_PELICULA`) REFERENCES `PELICULA` (`ID_PELICULA`),
  CONSTRAINT `FUNCIONES_ibfk_3` FOREIGN KEY (`CODIGO_SALA`) REFERENCES `SALAS` (`CODIGO_SALA`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `FUNCIONES`
--

LOCK TABLES `FUNCIONES` WRITE;
/*!40000 ALTER TABLE `FUNCIONES` DISABLE KEYS */;
/*!40000 ALTER TABLE `FUNCIONES` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `PELICULA`
--

DROP TABLE IF EXISTS `PELICULA`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `PELICULA` (
  `ID_PELICULA` int NOT NULL AUTO_INCREMENT,
  `TITULO` varchar(100) NOT NULL,
  `DIRECTOR` varchar(100) NOT NULL,
  `DURACION` int NOT NULL,
  `RESTRICCION` varchar(100) DEFAULT 'false',
  `ELENCO` varchar(100) NOT NULL,
  `SINOPSIS` varchar(1000) NOT NULL,
  `CALIFICACION` varchar(100) DEFAULT 'Todo publico',
  PRIMARY KEY (`ID_PELICULA`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `PELICULA`
--

LOCK TABLES `PELICULA` WRITE;
/*!40000 ALTER TABLE `PELICULA` DISABLE KEYS */;
/*!40000 ALTER TABLE `PELICULA` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `SALAS`
--

DROP TABLE IF EXISTS `SALAS`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `SALAS` (
  `CODIGO_SALA` int NOT NULL AUTO_INCREMENT,
  `DISPONIBILIDAD` varchar(100) NOT NULL,
  `CANTIDAD_DE_ASIENTOS` int NOT NULL,
  `TIPO_SALA` varchar(100) NOT NULL DEFAULT 'normal',
  `PRECIO_SALA` int NOT NULL DEFAULT '3500',
  PRIMARY KEY (`CODIGO_SALA`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `SALAS`
--

LOCK TABLES `SALAS` WRITE;
/*!40000 ALTER TABLE `SALAS` DISABLE KEYS */;
/*!40000 ALTER TABLE `SALAS` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `TICKETS`
--

DROP TABLE IF EXISTS `TICKETS`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `TICKETS` (
  `ID_TICKETS` int NOT NULL AUTO_INCREMENT,
  `ID_FUNCIONES` int NOT NULL,
  `CODIGO_DE_ASIENTO` int NOT NULL,
  `PRECIO` int NOT NULL,
  `FECHA_COMPRA` datetime NOT NULL,
  PRIMARY KEY (`ID_TICKETS`),
  KEY `ID_FUNCIONES` (`ID_FUNCIONES`),
  KEY `CODIGO_DE_ASIENTO` (`CODIGO_DE_ASIENTO`),
  CONSTRAINT `TICKETS_ibfk_1` FOREIGN KEY (`ID_FUNCIONES`) REFERENCES `FUNCIONES` (`ID_FUNCIONES`),
  CONSTRAINT `TICKETS_ibfk_2` FOREIGN KEY (`CODIGO_DE_ASIENTO`) REFERENCES `ASIENTO` (`CODIGO_DE_ASIENTO`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `TICKETS`
--

LOCK TABLES `TICKETS` WRITE;
/*!40000 ALTER TABLE `TICKETS` DISABLE KEYS */;
/*!40000 ALTER TABLE `TICKETS` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2022-09-17 20:47:29
